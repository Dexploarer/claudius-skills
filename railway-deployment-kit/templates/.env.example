# ==================================================
# Railway Deployment Kit - Environment Variables
# ==================================================

# ==================================================
# Environment Configuration
# ==================================================
ENVIRONMENT=production
NODE_ENV=production
LOG_LEVEL=info

# ==================================================
# Server Configuration
# ==================================================
PORT=3000
HOST=0.0.0.0

# ==================================================
# Database Configuration (PostgreSQL)
# ==================================================
# Use Railway's auto-configured DATABASE_URL
DATABASE_URL=${{Postgres.DATABASE_URL}}

# Or use individual components with private networking
# DATABASE_URL=postgresql://${{Postgres.PGUSER}}:${{Postgres.PGPASSWORD}}@${{Postgres.RAILWAY_PRIVATE_DOMAIN}}:${{Postgres.PGPORT}}/${{Postgres.PGDATABASE}}

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_SSL_REQUIRED=true

# ==================================================
# Redis Cache Configuration
# ==================================================
REDIS_URL=${{Redis.REDIS_URL}}

# Or with private networking
# REDIS_URL=redis://${{Redis.RAILWAY_PRIVATE_DOMAIN}}:${{Redis.PORT}}

# ==================================================
# MinIO Object Storage Configuration
# ==================================================
# Private network configuration (recommended)
MINIO_ENDPOINT=${{MinIO.RAILWAY_PRIVATE_DOMAIN}}
MINIO_PORT=${{MinIO.PORT}}
MINIO_ROOT_USER=${{MinIO.MINIO_ROOT_USER}}
MINIO_ROOT_PASSWORD=${{MinIO.MINIO_ROOT_PASSWORD}}
MINIO_USE_SSL=false  # Use false for private network

# Public endpoint (for external access)
MINIO_PUBLIC_ENDPOINT=https://${{MinIO.RAILWAY_STATIC_URL}}

# Bucket configuration
MINIO_BUCKET_UPLOADS=uploads
MINIO_BUCKET_AVATARS=avatars
MINIO_BUCKET_DOCUMENTS=documents
MINIO_BUCKET_BACKUPS=backups

# ==================================================
# Qdrant Vector Database Configuration
# ==================================================
# Private network configuration
QDRANT_URL=http://${{Qdrant.RAILWAY_PRIVATE_DOMAIN}}:${{Qdrant.PORT}}
QDRANT_API_KEY=${{Qdrant.QDRANT__SERVICE__API_KEY}}

# Collection settings
QDRANT_COLLECTION_DOCUMENTS=documents
QDRANT_COLLECTION_EMBEDDINGS=embeddings
EMBEDDING_DIMENSION=1536  # OpenAI ada-002
DISTANCE_METRIC=Cosine

# ==================================================
# External API Keys
# ==================================================
# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_ORG_ID=org-...

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-...

# Stripe
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PUBLISHABLE_KEY=pk_live_...

# SendGrid
SENDGRID_API_KEY=SG....
SENDGRID_FROM_EMAIL=noreply@example.com

# Sentry (Error Tracking)
SENTRY_DSN=https://...@sentry.io/...
SENTRY_ENVIRONMENT=${{ENVIRONMENT}}

# ==================================================
# Internal Services (Private Network)
# ==================================================
# API Service
API_URL=http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}
API_INTERNAL_URL=http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}

# Worker Service
WORKER_URL=http://${{worker.RAILWAY_PRIVATE_DOMAIN}}:${{worker.PORT}}

# Frontend (public)
FRONTEND_URL=https://${{frontend.RAILWAY_STATIC_URL}}

# Admin Dashboard (public)
ADMIN_URL=https://${{admin.RAILWAY_STATIC_URL}}

# ==================================================
# CORS Configuration
# ==================================================
CORS_ORIGINS=${{frontend.RAILWAY_STATIC_URL}},${{admin.RAILWAY_STATIC_URL}}

# ==================================================
# Authentication & Security
# ==================================================
JWT_SECRET=your-jwt-secret-here-min-32-chars
JWT_EXPIRY=7d

SESSION_SECRET=your-session-secret-here-min-32-chars
SESSION_MAX_AGE=604800000  # 7 days in milliseconds

ENCRYPTION_KEY=your-encryption-key-here-min-32-chars

# NextAuth (if using)
NEXTAUTH_URL=https://${{RAILWAY_STATIC_URL}}
NEXTAUTH_SECRET=your-nextauth-secret-min-32-chars

# ==================================================
# Feature Flags
# ==================================================
FEATURE_BETA_UI=false
FEATURE_NEW_AUTH=true
FEATURE_ANALYTICS=true
FEATURE_AI_CHAT=false

# ==================================================
# Rate Limiting
# ==================================================
RATE_LIMIT_WINDOW=900000  # 15 minutes in ms
RATE_LIMIT_MAX_REQUESTS=100

# ==================================================
# File Upload Configuration
# ==================================================
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ==================================================
# Email Configuration
# ==================================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=${{SENDGRID_API_KEY}}
SMTP_FROM=noreply@example.com

# ==================================================
# Monitoring & Analytics
# ==================================================
# Google Analytics
GA_TRACKING_ID=G-XXXXXXXXXX

# PostHog
POSTHOG_API_KEY=phc_...
POSTHOG_HOST=https://app.posthog.com

# ==================================================
# CDN Configuration
# ==================================================
CDN_DOMAIN=cdn.example.com
CDN_ENABLED=true

# ==================================================
# Background Jobs
# ==================================================
QUEUE_REDIS_URL=${{Redis.REDIS_URL}}
QUEUE_CONCURRENCY=5

# ==================================================
# Development Settings (local only)
# ==================================================
# These should only be set in local .env.local
# SKIP_EMAIL_VERIFICATION=true
# MOCK_EXTERNAL_APIS=true
# DEBUG_MODE=true

# ==================================================
# Railway-Specific Variables (Auto-configured)
# ==================================================
# These are automatically set by Railway
# RAILWAY_ENVIRONMENT=production
# RAILWAY_PROJECT_ID=...
# RAILWAY_SERVICE_ID=...
# RAILWAY_DEPLOYMENT_ID=...
# RAILWAY_STATIC_URL=...
# RAILWAY_PRIVATE_DOMAIN=...

# ==================================================
# Notes
# ==================================================
# 1. Never commit this file with real secrets
# 2. Use Railway Dashboard to set production values
# 3. Use reference variables: ${{ServiceName.VARIABLE}}
# 4. Private network uses http:// not https://
# 5. Rotate secrets regularly (quarterly)
